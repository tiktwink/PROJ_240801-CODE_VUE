import{av as C,aw as k,ax as S,b4 as p,b5 as m,ay as I,az as f,aA as c,aB as u,aG as e,am as i,b7 as r,aC as b,aF as h,c as l,aH as a,aD as g,aV as j,F as w,b9 as D,aE as N,a$ as T,aI as V,aJ as U}from"./index-4Bm1Eb5i.js";import{I as z}from"./DatePicker-Dql5jAG7.js";import"./Icon-CxmXhLz9.js";const P={name:"Exam",data(){return{mode:"auto",appStore:k(),examStore:S(),exams:[],id:"",name:"",range:[9467e8,Date.now()],subjectId:"",addDialogShow:!1,addExamId:"",addExamName:"",addExamTitle:"",addExamSubjectId:"",addExamSubjectTitle:"",addExamTime:"",addExamPos:"",addedExam:{},addedExamChoosen:!1,checkCodeShow:!1,examChoosen:""}},mounted(){document.getElementById("rside").style.visibility="visible"},methods:{queryExam(){if(this.id===""&&this.name===""&&this.subjectId===""&&this.range===null){this.$toast.add({severity:"warn",summary:"至少选择一个条件进行查询",life:3e3});return}if(this.id!==""){p.get(`/api/exam/index?id=${this.id}`,{headers:{username:m().username,token:m().token}}).then(o=>{o.data.code===0?(this.$toast.add({severity:"success",summary:"查询成功",life:1500}),this.exams=[o.data.data],this.mode="auto",console.log(o.data.data)):this.$toast.add({severity:"warn",summary:"查询失败(错误)，请自查原因或联系管理员",life:3e3})}).catch(o=>{this.$toast.add({severity:"error",summary:"查询异常，请自查原因或联系管理员",life:3e3})});return}p.get(`/api/exam/indexs?name=${this.name}&subjectId=${this.subjectId}`,{headers:{username:m().username,token:m().token}}).then(o=>{o.data.code===0&&(this.$toast.add({severity:"success",summary:"查询成功",life:1500}),this.exams=o.data.data,this.mode="auto",console.log(o.data.data))}).catch(o=>{this.$toast.add({severity:"error",summary:"查询异常",life:3e3})})},addExam(){if(this.addExamId===""||this.addExamTitle===""||this.addExamTime===""||this.addExamName===""||this.addExamSubjectId===""||this.addExamSubjectTitle===""||this.addExamPos===""){this.$toast.add({severity:"warn",summary:"有必填信息未填",life:3e3});return}p.post("/api/exam/index",{id:this.addExamId,name:this.addExamName,title:this.addExamTitle,subjectId:this.addExamSubjectId,subjectName:this.addExamSubjectTitle,examPos:this.addExamPos,examTime:this.addExamTime},{headers:{username:m().username,token:m().token}}).then(o=>{o.data.code===0&&(this.addDialogShow=!1,this.$toast.add({severity:"success",summary:"新增考试成功！考试ID："+o.data.data,detail:"通知10s后自动隐藏",life:1e4}),this.mode="added",p.get(`/api/exam/index?id=${o.data.data}`,{headers:{username:m().username,token:m().token}}).then(d=>{d.data.code===0?this.addedExam=d.data.data:this.addedExam="NONE"}).catch(d=>{this.addedExam="NONE"}))})},accessCheckCode(o){this.examChoosen=o,this.checkCodeShow=!0,this.appStore.sideOn=!0},chooseExam(o){this.examChoosen=o,this.appStore.sideOn=!0}},watch:{examChoosen(o,d){this.examStore.examChoosen=o}},components:{NDatePicker:z,NScrollbar:I}},n=o=>(V("data-v-9909344b"),o=o(),U(),o),q={class:"student-root w-full flex flex-wrap gap-y-2.5 justify-center items-center rounded-lg"},B={class:"flex-auto p-4 min-w-[80%] min-h-[160px] bg-accent rounded-lg"},O=n(()=>e("p",{class:"font-bold text-2xl mt-1 mx-2"},"查询 ",-1)),F={class:"query-items flex flex-wrap items-center gap-x-3 pl-4"},A={class:"query-item w-[290px]"},M=n(()=>e("span",null,"⚫ 考试ID",-1)),G={class:"query-item w-[290px]"},H=n(()=>e("span",null,"⚫ 考试名称",-1)),J={class:"query-item w-[380px]"},L=n(()=>e("span",{style:{"margin-right":"0.75rem"}},"⚫ 考试时间",-1)),K={class:"query-item w-[290px]"},Q=n(()=>e("span",null,"⚫ 科目ID",-1)),R=n(()=>e("div",{class:"btn text-lg btn-sm bg-white hover:bg-secondary border-none mx-2 px-6 absolute right-[100px] top-[58px]"}," 重填 ",-1)),W={class:"pl-2 mt-2 mb-1"},X=n(()=>e("span",{class:"font-bold text-2xl mb-3.5 mr-6"},"管理",-1)),Y=n(()=>e("span",{class:"btn bg-white mr-6 hover:bg-secondary btn-sm px-6 text-lg border-none"},"加入考生或班级",-1)),Z=n(()=>e("span",{class:"btn bg-white mr-2 hover:bg-secondary btn-sm px-6 text-lg border-none"},"排除考生或班级",-1)),$=n(()=>e("p",{class:"text-2xl font-bold my-4 mb-6"},[l("刚刚创建的考试 "),e("span",{class:"tip btn btn-sm border-none"}," 点击卡片切换选中 ")],-1)),ee={class:"added-exam flex flex-wrap gap-x-4"},te={class:"text-[#00c83c] hover:text-black",style:{"font-weight":"bold"}},se=n(()=>e("span",null,[l("阅卷码："),e("text",{class:"text-[#00c83c] hover:text-black",style:{"font-weight":"bold"}},">>点击查看<<")],-1)),de={class:"text-red-500",style:{"font-weight":"bold"}},oe={class:"text-red-500",style:{"font-weight":"bold"}},ne={key:1,class:"flex-auto p-4 min-w-[80%] h-[464px] bg-accent rounded-lg px-4"},ae=D('<div class="labels flex" data-v-9909344b><span class="font-bold" data-v-9909344b>考试名称</span><span class="font-bold" data-v-9909344b>考试ID</span><span class="font-bold" data-v-9909344b>科目ID</span><span class="font-bold" data-v-9909344b>科目名称</span><span class="font-bold" style="width:100px;" data-v-9909344b>考试时间</span><span class="font-bold" data-v-9909344b>考试地点</span><span class="font-bold" data-v-9909344b>考试码</span><span class="font-bold" style="width:120px;" data-v-9909344b>阅卷码</span><span class="font-bold" style="width:70px;" data-v-9909344b>已阅</span><span class="font-bold" style="width:70px;" data-v-9909344b>复阅</span></div>',1),le=["onClick"],ie={style:{width:"100px"}},re=["onClick"],me=n(()=>e("div",{class:"text-lg mb-4 font-bold"},"新增考试信息",-1)),xe={class:"add-dialog flex flex-wrap gap-y-3 gap-x-2"},ce={class:"flex justify-between items-center w-[16rem]"},ue=n(()=>e("span",null,"考试ID：",-1)),pe={class:"flex items-center justify-between w-[16rem]"},be=n(()=>e("span",null,"考试名称：",-1)),he={class:"flex items-center justify-between w-[16rem]"},fe=n(()=>e("span",null,"考试组：",-1)),ge={class:"flex items-center justify-between w-[16rem]"},ve=n(()=>e("span",null,"科目ID：",-1)),we={class:"flex items-center justify-between w-[16rem]"},ye=n(()=>e("span",null,"科目名称：",-1)),_e={class:"flex items-center justify-between w-[16rem]"},Ee=n(()=>e("span",null,"考试时间：",-1)),Ce={class:"flex items-center justify-between w-[16rem]"},ke=n(()=>e("span",null,"考试地点：",-1)),Se={class:"flex justify-between w-full mt-5"},Ie=n(()=>e("div",{class:"text-lg mb-4 font-bold"},"阅卷码信息",-1)),je={class:"add-dialog flex flex-wrap gap-y-3 gap-x-2 cursor-not-allowed"},De={class:"flex justify-between items-center w-[16rem]"},Ne=n(()=>e("span",null,"考试ID：",-1)),Te={class:"flex items-center justify-between w-[16rem]"},Ve=n(()=>e("span",null,"考试名称：",-1)),Ue=n(()=>e("div",{class:"flex items-center justify-between w-[16rem]"},[e("span",null,"阅卷码："),e("input",{class:"h-[35px] w-[12rem] font-bold text-neutral rounded-md bg-accent cursor-not-allowed",disabled:"",style:{"text-indent":"1ch",outline:"none",border:"none","box-sizing":"border-box"},type:"text",value:"105220"})],-1)),ze={class:"flex justify-center w-full mt-5"};function Pe(o,d,qe,Be,t,x){const y=f("NDatePicker"),_=f("NScrollbar"),v=f("Dialog");return c(),u(w,null,[e("div",q,[e("div",B,[O,e("div",F,[e("div",A,[M,i(e("input",{"onUpdate:modelValue":d[0]||(d[0]=s=>t.id=s),placeholder:"精确查询(推荐)",type:"text"},null,512),[[r,t.id]])]),e("div",G,[H,i(e("input",{"onUpdate:modelValue":d[1]||(d[1]=s=>t.name=s),placeholder:"模糊查询",type:"text"},null,512),[[r,t.name,void 0,{trim:!0}]])]),e("div",J,[L,b(y,{value:t.range,"onUpdate:value":d[2]||(d[2]=s=>t.range=s),clearable:"",type:"daterange"},null,8,["value"])]),e("div",K,[Q,i(e("input",{"onUpdate:modelValue":d[3]||(d[3]=s=>t.subjectId=s),placeholder:"精确查询",type:"text"},null,512),[[r,t.subjectId,void 0,{trim:!0}]])]),R,e("div",{class:"btn text-lg btn-sm bg-white hover:bg-secondary border-none mx-2 px-6 absolute right-0 top-[58px]",onClick:d[4]||(d[4]=(...s)=>x.queryExam&&x.queryExam(...s))}," 查询 ")]),e("div",W,[X,e("span",{class:"btn bg-white mr-6 hover:bg-secondary btn-sm px-6 text-lg border-none",onClick:d[5]||(d[5]=s=>t.addDialogShow=!0)},"新增考试"),e("span",{class:"btn bg-white mr-6 hover:bg-secondary btn-sm px-6 text-lg border-none",onClick:d[6]||(d[6]=s=>t.addDialogShow=!1)},"删除考试"),e("span",{class:"btn bg-white mr-6 hover:bg-secondary btn-sm px-6 text-lg border-none",onClick:d[7]||(d[7]=s=>t.addDialogShow=!1)},"编辑考试信息"),Y,Z])]),t.mode==="added"||t.mode==="addedauto"?(c(),u("div",{key:0,class:h([{"added-exam-choosen":t.addedExamChoosen},"added-exam-wrapper w-full px-6 pb-3"]),onClick:d[8]||(d[8]=s=>{t.addedExamChoosen=!t.addedExamChoosen,t.examStore.examChoosen=t.addedExam})},[$,e("div",ee,[e("span",null,[l("考试ID："),e("text",te,a(t.addedExam.id),1)]),e("span",null,[l("考试名称："),e("text",null,a(t.addedExam.name),1)]),e("span",null,[l("考试组："),e("text",null,a(t.addedExam.title),1)]),e("span",null,[l("考试时间："),e("text",null,a(t.addedExam.examTime),1)]),e("span",null,[l("考试地点："),e("text",null,a(t.addedExam.examPos),1)]),e("span",null,[l("科目ID："),e("text",null,a(t.addedExam.subjectId),1)]),e("span",null,[l("科目名称："),e("text",null,a(t.addedExam.subjectName),1)]),e("span",null,[l("考试人数："),e("text",null,a(t.addedExam.num),1)]),e("span",null,[l("考试码："),e("text",null,a(t.addedExam.testCode||"尚未创建"),1)]),se,e("span",null,[l("已阅："),e("text",de,a(t.addedExam.checked||"否"),1)]),e("span",null,[l("复阅："),e("text",oe,a(t.addedExam.doubleChecked||"否"),1)])])],2)):t.mode==="auto"||t.mode==="addedauto"?(c(),u("div",ne,[ae,b(_,{style:{"max-height":"380px",width:"100%","margin-top":"5px",padding:"0.5rem 1rem 1.5rem"}},{default:g(()=>[(c(!0),u(w,null,N(t.exams,s=>(c(),u("div",{class:h([{"added-exam-choosen":t.examChoosen.id===s.id},"exams flex cursor-pointer mb-3"]),onClick:E=>x.chooseExam(s)},[e("span",null,a(s.name),1),e("span",null,a(s.id),1),e("span",null,a(s.subjectId),1),e("span",null,a(s.subjectName),1),e("span",ie,a(String(s.examTime).slice(0,19).replace("T"," ")),1),e("span",null,a(s.examPos),1),e("span",null,a(s.examCode||"尚未创建"),1),e("span",{style:{"font-weight":"bold",color:"#0bcc45",width:"120px"},onClick:T(E=>x.accessCheckCode(s),["prevent","stop"])}," >>点击查看<< ",8,re),e("span",{class:h({"text-red":s.checked===1}),style:{width:"70px","font-weight":"normal"}},a(s.checked===1?"是":"否"),3),e("span",{class:h({"text-red":s.doubleChecked===1}),style:{width:"70px","font-weight":"normal"}},a(s.doubleChecked===1?"是":"否"),3)],10,le))),256))]),_:1})])):j("",!0)]),b(v,{visible:t.addDialogShow,"onUpdate:visible":d[18]||(d[18]=s=>t.addDialogShow=s),style:{width:"20rem",padding:"0.5rem","border-radius":"1rem"},header:"新增考试",modal:""},{default:g(()=>[me,e("div",xe,[e("div",ce,[ue,i(e("input",{"onUpdate:modelValue":d[9]||(d[9]=s=>t.addExamId=s),class:"h-[35px] w-[12rem] rounded-md bg-accent",style:{"text-indent":"1ch",outline:"none",border:"none","box-sizing":"border-box"},type:"text"},null,512),[[r,t.addExamId,void 0,{trim:!0}]])]),e("div",pe,[be,i(e("input",{"onUpdate:modelValue":d[10]||(d[10]=s=>t.addExamName=s),class:"h-[35px] w-[11rem] rounded-md bg-accent",style:{"text-indent":"1ch",outline:"none",border:"none","box-sizing":"border-box"},type:"text"},null,512),[[r,t.addExamName,void 0,{trim:!0}]])]),e("div",he,[fe,i(e("input",{"onUpdate:modelValue":d[11]||(d[11]=s=>t.addExamTitle=s),class:"h-[35px] w-[12rem] rounded-md bg-accent",placeholder:"非必填，由考试组织者确定",style:{"text-indent":"1ch",outline:"none",border:"none","box-sizing":"border-box"},type:"text"},null,512),[[r,t.addExamTitle,void 0,{trim:!0}]])]),e("div",ge,[ve,i(e("input",{"onUpdate:modelValue":d[12]||(d[12]=s=>t.addExamSubjectId=s),class:"h-[35px] w-[12rem] rounded-md bg-accent",style:{"text-indent":"1ch",outline:"none",border:"none","box-sizing":"border-box"},type:"text"},null,512),[[r,t.addExamSubjectId,void 0,{trim:!0}]])]),e("div",we,[ye,i(e("input",{"onUpdate:modelValue":d[13]||(d[13]=s=>t.addExamSubjectTitle=s),class:"h-[35px] w-[11rem] rounded-md bg-accent",placeholder:"注意：该项与科目ID绑定",style:{"text-indent":"1ch",outline:"none",border:"none","box-sizing":"border-box"},type:"text"},null,512),[[r,t.addExamSubjectTitle,void 0,{trim:!0}]])]),e("div",_e,[Ee,i(e("input",{"onUpdate:modelValue":d[14]||(d[14]=s=>t.addExamTime=s),class:"h-[35px] w-[11rem] rounded-md bg-accent",placeholder:"如2024-10-10T08:50:00",style:{"text-indent":"1ch",outline:"none",border:"none","box-sizing":"border-box"},type:"text"},null,512),[[r,t.addExamTime,void 0,{trim:!0}]])]),e("div",Ce,[ke,i(e("input",{"onUpdate:modelValue":d[15]||(d[15]=s=>t.addExamPos=s),class:"h-[35px] w-[11rem] rounded-md bg-accent",placeholder:"",style:{"text-indent":"1ch",outline:"none",border:"none","box-sizing":"border-box"},type:"text"},null,512),[[r,t.addExamPos,void 0,{trim:!0}]])])]),e("div",Se,[e("span",{class:"border-none btn btn-sm px-4 bg-[#f5f5f5] hover:bg-secondary",onClick:d[16]||(d[16]=s=>t.addDialogShow=!1)},"取消 "),e("span",{class:"border-none btn btn-sm px-4 bg-[#f5f5f5] hover:bg-error hover:text-white",onClick:d[17]||(d[17]=(...s)=>x.addExam&&x.addExam(...s))}," 确认新增 ")])]),_:1},8,["visible"]),b(v,{visible:t.checkCodeShow,"onUpdate:visible":d[22]||(d[22]=s=>t.checkCodeShow=s),style:{width:"20rem",padding:"0.5rem","border-radius":"1rem"},header:"查看阅卷码",modal:""},{default:g(()=>[Ie,e("div",je,[e("div",De,[Ne,i(e("input",{"onUpdate:modelValue":d[19]||(d[19]=s=>t.examChoosen.id=s),class:"h-[35px] w-[12rem] rounded-md bg-accent cursor-not-allowed",disabled:"",style:{"text-indent":"1ch",outline:"none",border:"none","box-sizing":"border-box"},type:"text"},null,512),[[r,t.examChoosen.id,void 0,{trim:!0}]])]),e("div",Te,[Ve,i(e("input",{"onUpdate:modelValue":d[20]||(d[20]=s=>t.examChoosen.name=s),class:"h-[35px] w-[11rem] cursor-not-allowed rounded-md bg-accent",disabled:"",style:{"text-indent":"1ch",outline:"none",border:"none","box-sizing":"border-box"},type:"text"},null,512),[[r,t.examChoosen.name,void 0,{trim:!0}]])]),Ue]),e("div",ze,[e("span",{class:"border-none btn btn-sm px-4 bg-[#f5f5f5] hover:bg-secondary",onClick:d[21]||(d[21]=s=>t.checkCodeShow=!1)},"关闭弹窗")])]),_:1},8,["visible"])],64)}const Me=C(P,[["render",Pe],["__scopeId","data-v-9909344b"]]);export{Me as default};
