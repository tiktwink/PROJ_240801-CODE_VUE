import{aR as Q,aQ as C,av as V,b4 as f,aA as T,aB as m,aG as o,am as i,b7 as u,aH as v,F as S,aE as A,aI as F,aJ as U}from"./index-4Bm1Eb5i.js";function j(e){return typeof e=="function"?e():C(e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const I=()=>{};function B(e,t){function l(...n){return new Promise((s,d)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(s).catch(d)})}return l}function E(...e){let t=0,l,n=!0,s=I,d,a,r,g,c;!Q(e[0])&&typeof e[0]=="object"?{delay:a,trailing:r=!0,leading:g=!0,rejectOnCancel:c=!1}=e[0]:[a,r=!0,g=!0,c=!1]=e;const h=()=>{l&&(clearTimeout(l),l=void 0,s(),s=I)};return q=>{const p=j(a),x=Date.now()-t,b=()=>d=q();return h(),p<=0?(t=Date.now(),b()):(x>p&&(g||!n)?(t=Date.now(),b()):r&&(d=new Promise((w,k)=>{s=c?k:w,l=setTimeout(()=>{t=Date.now(),n=!0,w(b()),h()},Math.max(0,p-x))})),!g&&!l&&(l=setTimeout(()=>n=!0,p)),n=!1,d)}}function y(e,t=200,l=!1,n=!0,s=!1){return B(E(t,l,n,s),e)}const G={data(){return{addTagTags:"",updateTagId:"",updateTagTags:"",delTagTd:"",queryTagId:"",queriedTag:"",tagsInDb:[]}},mounted(){this.queryTagsInDb(),this.debounceQueryTagsInDb=y(()=>{this.queryTagsInDb()},2e3),this.debounceAddTag=y(()=>{this.addTag()},2e3),this.debounceQueryTag=y(()=>{this.queryTag()},2e3)},methods:{addTag(){let e=this.addTagTags;if(e=e.split(" ").filter(t=>t.trim()!==""),e.length>10){alert("超过10个标签啦，不要太多");return}if(this.addTagTags.length>200){alert("这个标签的信息量有点大哦");return}console.log("tags tobe added: "+e),f.put("/api/tag/index",{tags:e}).then(t=>{console.log(t),t.data.code===0?this.queryTagsInDb():t.data.msg.indexOf("1000")>=0&&alert("已经有1000个标签啦，不能再多啦")}).catch(t=>{console.log(t)})},queryTag(){f.get(`/api/tag/${this.queryTagId}`).then(e=>{e.data.code===0?(console.log("查询成功: "),console.log(e.data.data),this.queriedTag=e.data.data):console.log(e)})},testlog(){},clickToQuery(e){this.queryTagId=e.target.textContent,this.queryTag()},queryTagsInDb(){f.get("/api/tag/all").then(e=>{e.data.code===0&&(console.log("查询已有tag成功: "),console.log(e.data.data),this.tagsInDb=e.data.data)})}}},D=e=>(F("data-v-67afc5b7"),e=e(),U(),e),P={class:"flex justify-center pt-8"},R={class:"wrapper flex flex-col gap-y-4"},W={class:"item flex flex-col items-center gap-y-2 min-w-[240px]"},_=D(()=>o("div",{class:"text-xs"},"查询结果(仅展示标签数组，完整信息在开发者工具控制台查看):",-1)),L={class:"text-base bg-secondary rounded-lg p-1 w-full h-[30px] text-center"},M={class:"item flex flex-col items-center gap-y-2 min-w-[240px]"},O={class:"item flex flex-col items-center gap-y-2 min-w-[240px]"},H={class:"item flex flex-col items-center gap-y-2 min-w-[240px]"},J={class:"wrapper wrapper-right relative"},N=D(()=>o("div",{class:"font-bold text-center mt-1 mb-3"},"数据库中存在的tag(ID)",-1));function z(e,t,l,n,s,d){return T(),m("div",P,[o("div",R,[o("div",W,[i(o("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>s.queryTagId=a),class:"text-sm w-full rounded-lg p-1 add-new-tag",placeholder:"查询一个tag，此处是其ID",type:"text"},null,512),[[u,s.queryTagId,void 0,{trim:!0}]]),o("span",{class:"w-full bg-base-300 hover:bg-secondary btn-sm btn btn-ghost",onClick:t[1]||(t[1]=(...a)=>e.debounceQueryTag&&e.debounceQueryTag(...a))},"查询"),_,o("span",L,v(s.queriedTag.tags),1)]),o("div",M,[i(o("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>s.addTagTags=a),class:"text-sm w-full rounded-lg p-1 add-new-tag",placeholder:"新增一个tag，用空格分隔不同标签",type:"text"},null,512),[[u,s.addTagTags,void 0,{trim:!0}]]),o("span",{class:"w-full bg-base-300 hover:bg-secondary btn-sm btn btn-ghost",onClick:t[3]||(t[3]=(...a)=>e.debounceAddTag&&e.debounceAddTag(...a))},"新增")]),o("div",O,[i(o("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>s.updateTagId=a),class:"text-sm w-full rounded-lg p-1 update-tag",placeholder:"更新一个已存在的tag，此处是其ID",type:"text"},null,512),[[u,s.updateTagId,void 0,{trim:!0}]]),i(o("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>s.updateTagTags=a),class:"text-sm w-full rounded-lg p-1 update-tag",placeholder:"用空格分隔不同标签",type:"text"},null,512),[[u,s.updateTagTags,void 0,{trim:!0}]]),o("span",{class:"w-full bg-base-300 hover:bg-secondary btn-sm btn btn-ghost",onClick:t[6]||(t[6]=(...a)=>e.updateTag&&e.updateTag(...a))},"更新")]),o("div",H,[i(o("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>s.delTagTd=a),class:"text-sm w-full rounded-lg p-1 add-new-tag",placeholder:"删除一个已存在的tag，此处是其ID",type:"text"},null,512),[[u,s.delTagTd,void 0,{trim:!0}]]),o("span",{class:"w-full bg-base-300 hover:bg-secondary btn-sm btn btn-ghost",onClick:t[8]||(t[8]=(...a)=>e.delTag&&e.delTag(...a))},"删除")])]),o("div",J,[N,o("span",{class:"btn btn-xs btn-ghost bg-base-300 hover:bg-secondary absolute top-[0.75rem] right-[0.75rem]",onClick:t[9]||(t[9]=(...a)=>e.debounceQueryTagsInDb&&e.debounceQueryTagsInDb(...a))},"刷新"),(T(!0),m(S,null,A(s.tagsInDb,a=>(T(),m("span",{class:"cursor-pointer tag font-bold min-w-[30px] h-[30px] bg-base-300 hover:bg-secondary px-1.5 py-0.5 rounded-lg",onClick:t[10]||(t[10]=r=>d.clickToQuery(r))},v(a.id),1))),256))])])}const Y=V(G,[["render",z],["__scopeId","data-v-67afc5b7"]]);export{Y as default};
